(function(){"use strict";var e={9917:function(e,t,i){var n=i(3751),a=i(641);const r={id:"app"};function s(e,t,i,n,s,o){const c=(0,a.g2)("AudioVisualiser");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(c)])}var o=i(33),c=i.p+"img/anime.34ed0f6f.png";const d=e=>((0,a.Qi)("data-v-cb2055d6"),e=e(),(0,a.jt)(),e),l={ref:"canvasContainer",class:"visualiser-container"},h={id:"title"},u=d((()=>(0,a.Lk)("img",{id:"anime",src:c},null,-1))),p=d((()=>(0,a.Lk)("audio",{id:"audio",controls:""},null,-1))),f=d((()=>(0,a.Lk)("div",{id:"out"},null,-1)));function m(e,t,i,n,r,s){const c=(0,a.g2)("Button");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("input",{type:"file",accept:"audio/*",onChange:t[0]||(t[0]=(...e)=>s.handleFileUpload&&s.handleFileUpload(...e)),hidden:"",ref:"fileInput"},null,544),(0,a.Lk)("h1",h,(0,o.v_)(r.title),1),u,p,f,(0,a.bF)(c,{id:"upload",label:"Upload MP3",icon:"pi pi-upload",onClick:s.triggerFileUpload},null,8,["onClick"])],512)}i(4114),i(6573),i(8100),i(7936),i(7467),i(4732),i(9577),i(4603),i(7566),i(8721);var v=i(9437),w={name:"AudioVisualiser",data(){return{title:"Audio Visualiser",animationFrameId:0,bars:[]}},methods:{triggerFileUpload(){this.$refs.fileInput.click()},handleFileUpload(e){this.audio=document.getElementById("audio");const t=e.target.files[0];t&&(this.title=t.name.substring(0,31),this.title!==t.name&&(this.title+="..."),this.audio.src=URL.createObjectURL(t),this.audio.load(),this.context.resume(),this.audio.play(),this.play())},play(){this.src=this.context.createMediaElementSource(this.audio),this.src.connect(this.analyser),this.analyser.connect(this.context.destination),this.analyser.fftSize=512;const e=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(e),this.initThreeJS(),this.createBars(e),this.animate()},initThreeJS(){this.scene=new v.Z58,this.group=new v.YJl,this.camera=new v.ubm(45,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(0,0,100),this.camera.lookAt(this.scene.position),this.scene.add(this.camera),this.renderer=new v.JeP({alpha:!0,antialias:!0});const e=this.$refs.canvasContainer.clientWidth,t=this.$refs.canvasContainer.clientHeight;this.renderer.setSize(e,t),this.renderer.setPixelRatio(window.devicePixelRatio),this.$refs.canvasContainer.appendChild(this.renderer.domElement);const i=new v.rKP(9.5,11,1e3),n=new v.V9B({color:4056575,side:v.$EB});this.plane=new v.eaF(i,n),this.plane.rotation.x=Math.PI/4,this.plane.position.x-=1.5,this.group.add(this.plane),this.scene.add(this.group);const a=new v.$p8(16777215,1);this.scene.add(a),window.addEventListener("resize",this.onWindowResize)},createBars(e){const t=2,i=.75,n=-e*(t+i)/2,a=new v.V9B({color:16777215,opacity:.3,transparent:!0}),r=this.$refs.canvasContainer.offsetHeight,s=.5*r-42;for(let o=0;o<e;o++){const e=new v.iNn(t,1,1),c=new v.eaF(e,a);c.position.x=n+o*(t+i),c.position.y=-r/2+s,this.bars.push(c),this.scene.add(c)}},animate(){this.animationFrameId=requestAnimationFrame(this.animate),this.analyser.getByteFrequencyData(this.dataArray);for(let l=0;l<this.dataArray.length;l++){const e=this.dataArray[l]/256*150;this.bars[l].scale.y=e}let e=0;for(let l=0;l<this.dataArray.length;l++)e+=this.dataArray[l];e/=this.dataArray.length;const t=e/256*5+2;this.plane.position.y=t;const i=e/256*1.5,n=new v.Q1f(4056575),a=new v.Q1f(16777215),r=n.lerp(a,i);this.plane.material.color.set(r);const s=10*(Math.random()-.5),o=10*(Math.random()-.5),c=5+Math.random(),d=`#${Math.floor(16777215*Math.random()).toString(16)}`;document.getElementById("anime").style.filter=`drop-shadow(${s}px ${o}px ${c}px ${d})`,this.renderer.render(this.scene,this.camera)},onWindowResize(){const e=this.$refs.canvasContainer.clientWidth,t=this.$refs.canvasContainer.clientHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.renderer.setPixelRatio(window.devicePixelRatio)}},beforeUnmount(){window.removeEventListener("resize",this.onWindowResize),this.audioContext&&this.audioContext.close(),cancelAnimationFrame(this.animationFrameId)},created(){this.context=new AudioContext,this.analyser=this.context.createAnalyser()}},y=i(6262);const g=(0,y.A)(w,[["render",m],["__scopeId","data-v-cb2055d6"]]);var b=g,x={name:"App",components:{AudioVisualiser:b}};const A=(0,y.A)(x,[["render",s]]);var C=A,F=i(3255),k=i(620);const $=(0,n.Ef)(C);$.use(F.Ay),$.component("Button",k.A),$.mount("#app")}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,r){if(!n){var s=1/0;for(l=0;l<e.length;l++){n=e[l][0],a=e[l][1],r=e[l][2];for(var o=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(i.O).every((function(e){return i.O[e](n[c])}))?n.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(l--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,a,r]}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/audio-visualiser/"}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,s=n[0],o=n[1],c=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(c)var l=c(i)}for(t&&t(n);d<s.length;d++)r=s[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(l)},n=self["webpackChunkaudio_visualiser"]=self["webpackChunkaudio_visualiser"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(9917)}));n=i.O(n)})();
//# sourceMappingURL=app.64b91d85.js.map